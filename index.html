<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="SaaShard : 根据具体业务数据的划分，实现MySQL下db级别的数据分片拆分。思路来源mycat和kingshard。">

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>SaaShard</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/berkaroad/saashard">View on GitHub</a>

          <h1 id="project_title">SaaShard</h1>
          <h2 id="project_tagline">根据具体业务数据的划分，实现MySQL下db级别的数据分片拆分。思路来源mycat和kingshard。</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/berkaroad/saashard/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/berkaroad/saashard/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h3>
<a id="基于saas应用的数据分片" class="anchor" href="#%E5%9F%BA%E4%BA%8Esaas%E5%BA%94%E7%94%A8%E7%9A%84%E6%95%B0%E6%8D%AE%E5%88%86%E7%89%87" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>基于SaaS应用的数据分片</h3>

<p>每个租户的操作是相互独立的，一个业务db下每张表都会存在一个区分租户的租户字段，因此可以为每张表使用相同的db级别的分片策略，即按租户id进行分片。此做法有两个好处：</p>

<ul>
<li>增、删、改、查，都是仅针对一个租户的，很好的进行了隔离；</li>
<li>保留了单个db内表之间的关联查询能力。</li>
</ul>

<h3>
<a id="支持读写分离" class="anchor" href="#%E6%94%AF%E6%8C%81%E8%AF%BB%E5%86%99%E5%88%86%E7%A6%BB" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>支持读写分离</h3>

<ul>
<li>在主库（Master）上执行:DML（update、insert、replace、delete）、DDL（create、drop、alter）、set语句</li>
<li>在从库（Slave）上执行：show、select</li>
</ul>

<p>读操作，如果有多台读库（Slave），则会以权重轮询方式，进行负载均衡。</p>

<h3>
<a id="支持hint" class="anchor" href="#%E6%94%AF%E6%8C%81hint" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>支持Hint</h3>

<p>支持select语句和DDL；set和show语句，暂时不支持。</p>

<ul>
<li>针对select语句，可以通过<code>/*!saashard master*/</code>强制在master上执行；</li>
<li>针对DDL，可以通过<code>/*!saashard nodes=node1,node2*/</code>强制在指定的数据节点列表上执行（不设置默认在所有节点上执行）。</li>
</ul>

<h3>
<a id="后端连接池管理" class="anchor" href="#%E5%90%8E%E7%AB%AF%E8%BF%9E%E6%8E%A5%E6%B1%A0%E7%AE%A1%E7%90%86" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>后端连接池管理</h3>

<ul>
<li>主库（Master）和从库（Slave）的连接池管理</li>
<li>连接池最大连接数限制，超出则等待1秒再取，尝试3次仍然失败后则关闭客户端连接</li>
</ul>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">SaaShard maintained by <a href="https://github.com/berkaroad">berkaroad</a></p>
        <p>Published with <a href="https://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
